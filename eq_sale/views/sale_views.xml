<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="eq_sale_stock_form_view" model="ir.ui.view">
			<field name="name">eq_sale.sale_stock.form</field>
			<field name="model">sale.order</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="sale_stock.view_order_form_inherit_sale_stock" />
			<field name="arch" type="xml">
				<field name="incoterm" position="after">
					<field name="eq_delivery_condition_id" />
				</field>
			</field>
		</record>




        <record id="eq_sale_address_fields_view_order_form_inherit" model="ir.ui.view">
            <field name="name">eq_sale.address.fields.view.order.form.inherit</field>
            <field name="model">sale.order</field>
	    	<field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
            	<!-- deactivate default version of address fields -->
                <field name="partner_id" position="attributes">
                    <attribute name="context">{'search_default_customer':1, 'show_address': 0,'active_model':'sale.order','main_address': True}</attribute>
                    <attribute name="options">{'always_reload': True}</attribute>
            		<attribute name="domain">[('customer','=',True), ('is_company', '=', True)]</attribute>
                </field>
                <!-- append our version of address fields -->
                <xpath expr="//field[@name='partner_id']" position="after">
                	<field name="eq_street_house_no" attrs="{'invisible': [('eq_street_house_no', '=', False)]}" />
               		<field name="eq_zip_city" attrs="{'invisible': [('eq_zip_city', '=', False)]}" />
               		<field name="eq_country" attrs="{'invisible': [('eq_country', '=', False)]}" />
                </xpath>

                <!-- invoice address -->
            	<xpath expr="//field[@name='partner_invoice_id']" position="attributes">
            		<!-- <attribute name="domain">['|', ('id', '=', partner_id), ('parent_id', '=', partner_id)]</attribute> -->
                    <attribute name="context">{'search_default_customer':1, 'show_address': 0,'active_model':'sale.order'}</attribute>
            	</xpath>
            	<xpath expr="//field[@name='partner_invoice_id']" position="after">
            		<field name="eq_invoice_address" groups="sale.group_delivery_invoice_address"/>
            	</xpath>

            	<!-- shipping address -->
            	<xpath expr="//field[@name='partner_shipping_id']" position="attributes">
            		<!-- <attribute name="domain">['|', ('id', '=', partner_id), ('parent_id', '=', partner_id)]</attribute> -->
                    <attribute name="context">{'search_default_customer':1, 'show_address': 0,'active_model':'sale.order'}</attribute>
            	</xpath>
            	<xpath expr="//field[@name='partner_shipping_id']" position="after">
            		<field name="eq_delivery_address" groups="sale.group_delivery_invoice_address"/>
            	</xpath>
            </field>
	    </record>


		<record id="eq_view_sale_config_settings_show_address" model="ir.ui.view">
            <field name="name">eq_sale.config.address.product.settings</field>
            <field name="model">sale.config.settings</field>
            <field name="inherit_id" ref="sale.view_sales_config"/>
            <field name="arch" type="xml">
                <data>
                	<xpath expr="//group[@name='customers']" position="inside">
						<label string="Customer search settings [equitania]"/>
						<div>
							<div>
								<field name="default_show_address" class="oe_inline"/>
								<label for="default_show_address" string="Show street and city in the partner search of the saleorder [equitania]"/>
							</div>

							<div>
								<field name="default_search_only_company" class="oe_inline"/>
								<label for="default_search_only_company" string="Only search for Companies in the Sale Order/Quotation [equitania]"/>
							</div>
						</div>
					</xpath>

					<xpath expr="//group[@name='quotations_sales']" position="inside">
						<label string="Product properties"/>
	                    <div>
	                        <field name="group_product_rrp"/>
							<label for="group_product_rrp"/>
	                    </div>
					</xpath>
                </data>
            </field>
        </record>


	</data>
</openerp>